## 迁移到 3.0+

Modelar 3.0+ 采用 TypeScript 编写，但你依旧可以使用纯 JavaScript 风格来使用它。
出于一些考虑，3.0 开始，那些可以在外部访问的属性，已经不再使用前缀 `_` 修饰，例如
`model._data` 已经变成了 `model.data`，但为了兼容 2.X 版本的程序，旧属性名称依旧
是可用的，不过你应该在以后书写代码时避免再使用旧属性。

这里有一个不兼容的修改，因为新版中 `query.table` 属性替代了 `query._table` 属性，
而在旧版本中，`query.table()` 是一个方法，这也就意味着，如果想要正常在 3.0+ 版本中
运行基于 2.X 编写的代码，必须修改你代码中所有使用了 `query.table()` 的地方。

另外，2.X 之前的版本允许你使用下面的方式来导入 `Model` 类：

```javascript
const Model = require("modelar");
```

自 3.0 版本起，这已经不再支持了，必须要修改为：

```javascript
const { Model } = require("modelar");
```

这是一项不向后兼容的修改，如果你的旧代码中使用了它，必须修改为新的导入方式。

另一项修改是迭代器实现上，在 2.X 版本中，你可以使用下面的方式遍历模型的数据：

```javascript
for (let [key, value] of model) {
    // ...
}
```

而自 3.0 版本起，这项特性被修改为下面这样：

```javascript
for (let { key, value } of model) {
    // ...
}
```

为了兼容 2.X 版本的代码，你可以将 `Model.oldIterator` 设置为 `true` 来使用旧式的
迭代器，但这回触发一条警告，你应该使用新的方式进行遍历属性。

**自 3.0.4 版本起，将不再兼容旧的迭代器风格。**

## 从 1.X 迁移到 2.0+

Modelar 2.0 修改了其内核的一些细节，因此基于 1.X 版本编写的程序将不能在 2.0+ 版本中
运行，如果你想要迁移到新版本，请跟随这份向导，它并不困难。

新版本并没有修改太多东西，但现在它继承了 Node.js 的 `EventEmitter` 类，同时也修改了
`受保护属性` 的编写风格。在 1.X 版本中，这些属性是使用两个下划线 (`__` 传统 JS 做法)
作为开头来命名的，但在 2.0+ 版本中，它使用 Node.js 的风格，以一个下划线 (`_`) 来
作为名称的开头。

大部分这些属性你都可能都没有接触到，除了 `__data` 属性，现在它是 `_data`。无论如何你
怎样使用了那些属性，只需要更改你的代码，修改以 `__` 开头的受保护属性为 `_` 开头，就
基本上可以了。

不仅是属性，方法也一样，如果你使用了受保护的方法，也按这种方式去修改你的代码。

最后一件事情就是 `table.foreignKey()` 方法，它来自 `Table` 类，现在它的参数顺序被
修改为 `(table, field, onDelete, onUpdate)` 了，原来则是
`(table, field, onUpdate, onDelete)`，如果你在你的程序中使用了这个方法，将其修改为
新的风格。